<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self'; connect-src 'self'; font-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KontrNahryuk</title>
    <link rel="stylesheet" href="./styles/ui.css" />
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar">
        <div class="brand">‚ö° –ù–∞—Ö—Ä—é–∫</div>
        <nav class="nav">
          <a href="#/functions" id="nav-func">–§—É–Ω–∫—Ü—ñ—ó</a>
          <a href="#/batch" id="nav-batch">–ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞</a>
          <a href="#/notes" id="nav-notes">Notes</a>
          <a href="#/updates" id="nav-updates">Updates</a>
          <a href="#/settings" id="nav-settings">Settings</a>
        </nav>
      </aside>

      <header class="topbar">
        <div style="display:flex; gap:8px">
          <button class="btn ghost" id="btn-notify">Notify</button>
          <button class="btn" id="btn-docs">Docs</button>
        </div>
      </header>

      <main class="content">
        
        <!-- –ë–ª–æ–∫—É—é—á–∏–π –µ–∫—Ä–∞–Ω –¥–ª—è –Ω–µ–ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
        <div id="license-gate" class="license-gate" style="display: none;">
          <div class="license-gate-content">
            <h1>üîê KontrNahryuk</h1>
            <h2>–ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ª—ñ—Ü–µ–Ω–∑—ñ—ó</h2>
            <p>–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–≤–µ—Å—Ç–∏ –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–π –∫–ª—é—á</p>
            
            <div class="license-form">
              <input type="password" id="gate-license-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–π –∫–ª—é—á" />
              <button class="btn primary" id="gate-license-btn">–ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏</button>
            </div>
            
            <div id="gate-license-status" class="license-status pending">
              –í–≤–µ–¥—ñ—Ç—å –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è
            </div>
            
            <div class="license-help">
              <p>–í–≤–µ–¥—ñ—Ç—å –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–π –∫–ª—é—á –æ—Ç—Ä–∏–º–∞–Ω–∏–π –≤—ñ–¥ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞</p>
              <p>–ö–ª—é—á –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —ñ –≤–≤–æ–¥–∏—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑</p>
            </div>
          </div>
        </div>
        <section data-route="/functions" class="route">
          <div class="card">
            <h3>–ü–∞–Ω–µ–ª—å –§—É–Ω–∫—Ü—ñ—ó</h3>

            <div class="form grid cols-2">
              <label class="field">
                <span class="label">–ü–æ—à—É–∫ –¥–æ–∫—É–º–µ–Ω—Ç—É Word (–Ω–∞–∫–∞–∑)</span>
                <label class="file-picker">
                  <input type="file" class="file-input" id="word-file" accept=".doc,.docx" aria-label="–í–∏–±—Ä–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç Word">
                  <span class="file-btn">–í–∏–±—Ä–∞—Ç–∏ —Ñ–∞–π–ª</span>
                  <span class="file-name">–§–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ</span>
                </label>
              </label>

              <label class="field">
                <span class="label">–ú—ñ—Å—Ü–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É</span>
                <div class="row">
                  <input class="input" id="result-path" placeholder="–®–ª—è—Ö –¥–æ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É‚Ä¶" readonly />
                  <button class="btn" id="choose-result">–û–±—Ä–∞—Ç–∏ –º—ñ—Å—Ü–µ‚Ä¶</button>
                </div>
                <small class="hint">–ö–Ω–æ–ø–∫–∞ –≤—ñ–¥–∫—Ä–∏—î —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–≤—ñ–¥–Ω–∏–∫</small>
              </label>
            </div>

            <div class="divider"></div>

            <div class="grid cols-3 toggles">
              <label class="toggle">
                <input type="checkbox" id="t-2bsp" class="nose" checked />
                <span>2–ë–°–ü</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="t-order" class="nose" />
                <span>–†–æ–∑–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="t-autopen" class="nose" checked />
                <span>–ê–≤—Ç–æ–≤—ñ–¥–∫—Ä–∏—Ç—Ç—è</span>
              </label>
            </div>

            <div class="divider"></div>
            <div class="actions-bottom">
              <button class="btn primary" id="btn-process-order">–û–±—Ä–æ–±–∏—Ç–∏ –Ω–∞–∫–∞–∑</button>
            </div>

            <div class="log-container">
              <h4>–õ–æ–≥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</h4>
              <pre id="log-body" class="log-body"></pre>
            </div>
          </div>
        </section>

        <section data-route="/batch" class="route" hidden>
          <div class="card">
            <h3>–ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞ Excel —Ñ–∞–π–ª—ñ–≤</h3>
            <p class="subtitle">–Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è –±—ñ–π—Ü—ñ–≤ –∑ –ø–æ–º—ñ—Å—è—á–Ω–∏—Ö Excel –∑–≤—ñ—Ç—ñ–≤</p>

            <div class="form">
              <label class="field">
                <span class="label">–í—Ö—ñ–¥–Ω–∞ –ø–∞–ø–∫–∞ –∑ Excel —Ñ–∞–π–ª–∞–º–∏</span>
                <div class="row">
                  <input class="input" id="batch-input-folder" placeholder="–û–±–µ—Ä—ñ—Ç—å –ø–∞–ø–∫—É –∑ —Ñ–∞–π–ª–∞–º–∏‚Ä¶" readonly />
                  <button class="btn" id="btn-choose-batch-folder">–û–±—Ä–∞—Ç–∏ –ø–∞–ø–∫—É</button>
                </div>
                <small class="hint">–ü–∞–ø–∫–∞ –∑ –ø–æ–º—ñ—Å—è—á–Ω–∏–º–∏ Excel —Ñ–∞–π–ª–∞–º–∏ (–ª–∏—Å—Ç–æ–ø–∞–¥‚Üí–≥—Ä—É–¥–µ–Ω—å‚Üí—Å—ñ—á–µ–Ω—å‚Üí...)</small>
              </label>

              <label class="field">
                <span class="label">–§–∞–π–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É</span>
                <div class="row">
                  <input class="input" id="batch-output-file" placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ: Result_YYYYMMDD-HHmm.xlsx" readonly />
                  <button class="btn" id="btn-choose-batch-output">–û–±—Ä–∞—Ç–∏ –º—ñ—Å—Ü–µ</button>
                </div>
                <small class="hint">–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è —É –≤—Ö—ñ–¥–Ω—ñ–π –ø–∞–ø—Ü—ñ</small>
              </label>
            </div>

            <div class="batch-controls">
              <button class="btn primary" id="btn-start-batch" disabled>
                <span id="batch-btn-text">–û–±—Ä–æ–±–∏—Ç–∏</span>
              </button>
              <button class="btn ghost" id="btn-cancel-batch" disabled>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>

            <div class="batch-progress" id="batch-progress" hidden>
              <div class="progress-info">
                <div class="progress-bar">
                  <div class="progress-fill" id="batch-progress-fill"></div>
                </div>
                <div class="progress-details">
                  <span id="batch-progress-percent">0%</span>
                  <span id="batch-progress-status">–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞...</span>
                </div>
                <p id="batch-progress-detail">–§–∞–π–ª 0/0, –ª–∏—Å—Ç 0/0</p>
              </div>
            </div>

            <div class="batch-log">
              <h4>–õ–æ–≥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</h4>
              <div class="log-controls">
                <button class="btn ghost small" id="btn-clear-batch-log">–û—á–∏—Å—Ç–∏—Ç–∏</button>
                <button class="btn ghost small" id="btn-save-batch-log">–ó–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–≥</button>
              </div>
              <div class="log-container">
                <pre id="batch-log-body" class="log-body"></pre>
              </div>
            </div>
          </div>
        </section>

        <section data-route="/notes" class="route" hidden>
          <div class="card">
            <h3>Notes</h3>
            <label style="display:flex; flex-direction:column; gap:8px;">
              –î–æ–¥–∞—Ç–∏ –Ω–æ—Ç–∞—Ç–∫—É:
              <textarea class="input" id="note-input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —â–æ—Å—å‚Ä¶"></textarea>
            </label>
            <button class="btn" id="btn-add-note">–î–æ–¥–∞—Ç–∏</button>
            <ul id="notes-list" style="margin-top:12px"></ul>
          </div>
        </section>

        <section data-route="/updates" class="route" hidden>
          <div class="card">
            <h3>–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É</h3>
            
            <div class="update-info">
              <div class="version-info">
                <p><strong>–ü–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è:</strong> <span id="current-version">1.0.0</span></p>
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="update-status">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–Ω–∞–π—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è"</span></p>
              </div>
              
              <div id="update-available" class="update-available" hidden>
                <div class="update-details">
                  <h4>–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞ –≤–µ—Ä—Å—ñ—è: <span id="new-version"></span></h4>
                  <p>–†–æ–∑–º—ñ—Ä: <span id="update-size"></span></p>
                  <p>–û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: <span id="update-date"></span></p>
                  <div class="update-actions">
                    <a href="#" id="release-notes" target="_blank" class="link">–°–ø–∏—Å–æ–∫ –∑–º—ñ–Ω</a>
                    <button class="btn primary" id="btn-auto-update">üê∑ –û–Ω–æ–≤–∏—Ç–∏ –ù–∞—Ö—Ä—é–∫</button>
                    <button class="btn ghost" id="btn-manual-download">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Ä—É—á–Ω—É</button>
                  </div>
                </div>
              </div>
              
              <div id="mandatory-update" class="mandatory-update" hidden>
                <div class="alert error">
                  <h4>‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</h4>
                  <p>–¶–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —î –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º –¥–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏</p>
                  <div class="mandatory-actions">
                    <button class="btn primary" id="btn-mandatory-update">–û–Ω–æ–≤–∏—Ç–∏ –∑–∞—Ä–∞–∑</button>
                    <button class="btn ghost" id="btn-exit-app">–í–∏–π—Ç–∏</button>
                  </div>
                </div>
              </div>
              
              <div id="update-progress" class="update-progress" hidden>
                <div class="progress-info">
                  <h4>üê∑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ù–∞—Ö—Ä—é–∫–∞</h4>
                  <p id="progress-text">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                  <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%; transition: width 0.3s ease;"></div>
                  </div>
                  <div class="progress-details">
                    <span id="progress-percent">0%</span>
                    <span id="progress-speed">0 KB/s</span>
                    <span id="progress-size">0 / 0 MB</span>
                  </div>
                </div>
                <div class="progress-actions">
                  <button class="btn ghost" id="btn-cancel-update">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                  <button class="btn ghost" id="btn-restart-after-update" style="display:none;">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏</button>
                </div>
              </div>
              
              <div id="update-error" class="update-error" hidden>
                <div class="alert error">
                  <h4>–ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</h4>
                  <p id="error-message"></p>
                  <div class="error-actions">
                    <button class="btn" id="btn-retry-update">–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏</button>
                    <button class="btn ghost" id="btn-save-log">–ó–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–≥</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="license-section">
              <div class="card-header">
                <h4>üîë –õ—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–π –¥–æ—Å—Ç—É–ø</h4>
              </div>
              <div id="license-input-section" class="license-input">
                <input type="password" id="license-key-input" class="input" placeholder="–í–≤–µ–¥—ñ—Ç—å –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–∏–π –∫–ª—é—á" />
                <button class="btn ghost" id="btn-set-license">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
              </div>
              <div class="license-status" id="license-status">–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ª—ñ—Ü–µ–Ω–∑—ñ—é...</div>
            </div>
            
            <div class="update-controls">
              <button class="btn" id="btn-check-updates">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</button>
            </div>
            
            <div class="update-info">
              <div id="update-status">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è" –¥–ª—è –ø–æ—à—É–∫—É –Ω–æ–≤–∏—Ö –≤–µ—Ä—Å—ñ–π</div>
              <div id="update-details" style="display: none;"></div>
            </div>
          </div>
        </section>

        <section data-route="/settings" class="route" hidden>
          <div class="card">
            <h3>Settings</h3>
            <label style="display:flex; gap:8px; align-items:center;">
              –¢–µ–º–∞:
              <select class="input" id="theme-select">
                <option value="system">System</option>
                <option value="dark">Dark</option>
                <option value="light">Light</option>
              </select>
            </label>
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="./main.ts"></script>
  </body>
</html>
